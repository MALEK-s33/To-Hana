<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>To Hana</title>
  <link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
  <style>
    body {
  margin: 0;
  padding: 0;
  background: radial-gradient(circle at top, #ffe6f0, #ffb3cc);
  font-family: 'Pacifico', cursive;
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
  text-align: center;
  overflow: hidden;
  cursor: pointer;
}
canvas {
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    pointer-events: none;
  }
    
.container {
  max-width: 500px;
  padding: 20px;
}

.animated-text {
  font-size: 2.5rem;
  color: #ff007f;
  animation: bounce 1.5s infinite;
}

.subtitle {
  font-size: 1.2rem;
  color: #333;
  margin-top: 10px;
  font-family: sans-serif;
}

.footer {
  font-size: 1rem;
  color: #444;
  font-family: sans-serif;
  margin-top: 20px;
}

.cake-container {
  margin-top: 30px;
}

.cake {
  width: 150px;
  margin: 0 auto;
  position: relative;
}

.layer {
  height: 30px;
  border-radius: 10px;
  margin-bottom: 1px;
  box-shadow: 0 2px 4px rgba(0,0,0,0.15);
  opacity: 0;
  position: relative;
  animation: dropDown 0.5s forwards;
}
.cream {
  height: 5px;
  width: 150px;
  background: white;
  border-radius: 3px 3px 10px 10px;
  margin: -1px 0 1px 0;
  box-shadow: 0 1px 2px rgba(0,0,0,0.1);
  opacity: 0;
  position: relative;
  animation: dropDown 0.5s forwards;
  overflow: visible;
}
.cream::after{
  content: '';
  position: absolute;
  left: 0;
  width: 100%;
  height: 11px;
  background: white;
  border-radius: 50%;
  transform: translateY(0);
  animation: melt 1.5s infinite ease-in-out;
}
@keyframes melt{
  0%, 100% { transform: translateY(0);}
  50% { transform: translateY(2px)}
}

.cake .cream:nth-of-type(2) { animation-delay: 1.3s; }
.cake .cream:nth-of-type(4) { animation-delay: 0.6s; }

.top { background: #ff6699; animation-delay: 1.6s; }
.middle { background: #ff3366; animation-delay: 1s; }
.bottom { background: #cc0052; animation-delay: 0.2s; }

.candles {
  position: absolute;
  top: -30px;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  gap: 10px;
  opacity: 0;
  animation: popIn 0.5s 2.3s forwards;
}

.flame {
  width: 10px;
  height: 20px;
  background: orange;
  border-radius: 50%;
  animation: flicker 0.2s infinite;
  box-shadow: 0 0 15px orange;
}

@keyframes bounce {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-10px); }
}

@keyframes dropDown {
  from { transform: translateY(-100px); opacity: 0; }
  to { transform: translateY(0); opacity: 1; }
}
@keyframes fadeincream {
  from { opacity: 0; transform: scaleY(0.5); }
  to { opacity: 1; transform: scaleY(1); }
}

@keyframes popIn {
  from { transform: scale(0.5) translateX(-50%); opacity: 0; }
  to { transform: scale(1) translateX(-50%); opacity: 1; }
}

@keyframes flicker {
  0%, 100% { opacity: 1; transform: scale(1); }
  50% { opacity: 0.6; transform: scale(1.2); }
}

#toggleBtn {
      background-color: #ffd6e8;
      color: #6a1b4d;
      border: none;
      padding: 6px 10px;
      font-size: 14px;
      border-radius: 25px;
      cursor: pointer;
      box-shadow: 0 4px 6px rgba(255, 182, 193, 0.3);
      transition: all 0.3s ease;
    }

    #toggleBtn:hover {
      background-color: #ffc1dc;
      transform: scale(1.05);
      box-shadow: 0 6px 10px rgba(255, 182, 193, 0.4);
    }

    #toggleBtn:active {
      transform: scale(0.97);
    }
</style>
</head>

<body>

  <canvas id="confettii"></canvas>
  <script>
(() => {
  const canvas = document.getElementById('confettii');
  const ctx = canvas.getContext('2d');
  let W, H;

  function resize() {
    W = window.innerWidth;
    H = window.innerHeight;
    canvas.width = W;
    canvas.height = H;
  }
  resize();
  window.addEventListener('resize', resize);

  class ConfettiParticle {
    constructor(x, y) {
      this.x = x;
      this.y = y;
      this.size = Math.random() * 8 + 4;
      this.color = `hsl(${Math.floor(Math.random() * 360)}, 70%, 60%)`;
      this.speedX = (Math.random() - 0.5) * 6;
      this.speedY = Math.random() * -7 - 3;
      this.gravity = 0.3;
      this.rotation = Math.random() * 360;
      this.rotationSpeed = (Math.random() - 0.5) * 10;
      this.life = 100;
      this.opacity = 1;
    }

    update() {
      this.speedY += this.gravity;
      this.x += this.speedX;
      this.y += this.speedY;
      this.rotation += this.rotationSpeed;
      this.life--;
      this.opacity = this.life / 100;
    }

    draw(ctx) {
      ctx.save();
      ctx.translate(this.x, this.y);
      ctx.rotate(this.rotation * Math.PI / 180);
      ctx.fillStyle = `rgba(${hexToRgb(this.color)},${this.opacity})`;
      ctx.fillRect(-this.size/2, -this.size/2, this.size, this.size);
      ctx.restore();
    }

    isDead() {
      return this.life <= 0 || this.y > H;
    }
  }

  function hexToRgb(hsl) {
    const hslRegex = /hsl\((\d+),\s*(\d+)%,\s*(\d+)%\)/;
    const result = hslRegex.exec(hsl);
    if (!result) return '255,255,255';
    let h = +result[1] / 360;
    let s = +result[2] / 100;
    let l = +result[3] / 100;

    let r, g, b;

    if(s === 0){
        r = g = b = l;
    }else{
        const hue2rgb = (p, q, t) => {
          if(t < 0) t += 1;
          if(t > 1) t -= 1;
          if(t < 1/6) return p + (q - p) * 6 * t;
          if(t < 1/2) return q;
          if(t < 2/3) return p + (q - p) * (2/3 - t) * 6;
          return p;
        };
        const q = l < 0.5 ? l * (1 + s) : l + s - l * s;
        const p = 2 * l - q;
        r = hue2rgb(p, q, h + 1/3);
        g = hue2rgb(p, q, h);
        b = hue2rgb(p, q, h - 1/3);
    }
    return `${Math.round(r * 255)},${Math.round(g * 255)},${Math.round(b * 255)}`;
  }

  let confettiParticles = [];

  function createConfetti(x, y) {
    const count = 20;
    for (let i = 0; i < count; i++) {
      confettiParticles.push(new ConfettiParticle(x, y));
    }
  }

  function animate() {
    ctx.clearRect(0, 0, W, H);
    confettiParticles = confettiParticles.filter(p => !p.isDead());
    confettiParticles.forEach(p => {
      p.update();
      p.draw(ctx);
    });
    requestAnimationFrame(animate);
  }
  animate();

  window.addEventListener('click', e => {
    createConfetti(e.clientX, e.clientY);
  });

  window.addEventListener('touchstart', e => {
    const touch = e.touches[0];
    createConfetti(touch.clientX, touch.clientY);
  });
})();
</script>
  
  <script>
    function confettiBurst() {
      confetti({
        particleCount: 200,
        spread: 90,
        origin: { y: 0.6 }
      });
    }

    confettiBurst();
    setTimeout(confettiBurst, 1000);
    setTimeout(confettiBurst, 2000);
  </script>
  <div class="container">
    <h1 class="animated-text">Happy Birthday Hana! üéâ</h1>
    <p class="subtitle">You're beautiful, kind, and unforgettable. I hope this day is as amazing as you are üíñ</p>
    <div class="cake-container">
      <div class="cake">
        <div class="layer top"></div>
        <div class="cream"></div>
        <div class="layer middle"></div>
        <div class="cream"></div>
        <div class="layer bottom"></div>
        <div class="candles">
          <div class="flame"></div>
          <div class="flame"></div>
          <div class="flame"></div>
        </div>
      </div>
    </div>
    <div style="font-size: 0.7rem; color: #ff66a3; font-family: 'Pacifico', cursive; margin-top: 5px;">
      25 August
      <button id="toggleBtn" onclick="toggleMusic()">‚ñ∂Ô∏è</button>

  <audio id="bgMusic" loop>
    <source src="Fujii Kaze - Love Like This [Official video].mp3" type="audio/mpeg">

  <script>
    const audio = document.getElementById("bgMusic");
    const toggleBtn = document.getElementById("toggleBtn");

    function toggleMusic() {
      if (audio.paused) {
        audio.play();
        toggleBtn.textContent = "‚è∏Ô∏è";
      } else {
        audio.pause();
        toggleBtn.textContent = "‚ñ∂Ô∏è";
      }
    }
  </script>
    </div>
    <div style="margin-top: 20px; font-size: 0.8rem; color: #222; font-family: 'Pacifico', cursive;">‚Äî Malek El Ali</div>
  </div>
</body>
</html>
